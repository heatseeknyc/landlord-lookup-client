<DOCTYPE html>
<html>
<head>
	<title>NYC Landlord Lookup</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/images/favicon.ico">
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v1.0.3/leaflet.css" />
    <link rel="stylesheet" href="/assets/css/lookup-app.css"/>
    <link rel="stylesheet" href="/assets/css/lookup-tabs.css"/>
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
</head>
<body onLoad="lookup.app.run();">
    <div id="header">
        <span class="legend">NYC Landlord Lookup</span> &nbsp; &nbsp;
        <span class="legend2">About</span> &nbsp; 
        <span class="legend2">Contact</span> &nbsp; 
    </div>
    <div id="themap"></div>
    <div class="panel-corner" id="panel-search">
      <!-- div class="form-group" id="form-container" -->
        <form class="form-inline" id="address-form">
          <div class="form-group" id="form-inner">
            <input type="text" class="form-control" id="address-input" placeholder="21 west 46 street">
            <button type="submit" id="address-submit">Go</button>
            <br>
          </div>
        </form>
      <!-- /div -->
    </div>
    <div class="panel-upper" id="panel-message">
        <div class="popup-control">&times;</div>
        <h3>Welcome to the Landlord Lookup tool!</h3>
        Type an NYC address, and see what happens.
    </div>
    <div class="panel-upper" id="panel-error">
        <br>
        <span class="errorcaption">Something went wrong!</span>
        <p class="errorbox" id="error-search"></p>
        Go ahead, try again. 
    </div>
    <!-- 
       If it's in this DIV, the BBL is at least recognized;
       that is, confirmed to be in Pluto, ACRIS (or both) -->
    <div class="panel-upper" id="panel-summary">
        <div class="popup-control">&times;</div>

        <br>
        <div class="section" id="section-acris-header"></div>
        <div class="section" id="section-pluto-header"></div>

        <h3>Ownership</h3>
        <div class="section" id="section-owner-acris"></div>
        <div class="section" id="section-owner-pluto"></div>

        <div class="section" id="section-pluto-landuse"></div>
        <div class="section" id="section-residential"></div>
        <div class="section" id="section-compliance"></div>
        <p>
    </div>

    <div class="panel-popup" id="popup-almost">
      <div class="popup-control">&times;</div>
      <br>
      A popup with some text.
      </div>
    </div>

    <div class="panel-lower" id="panel-data">
      <div class="popup-control">&times;</div>
      <div id="tab-container" class="tab-container">
        <ul class="etabs">
          <li class="tab"><a href="#tab-contacts">HPD Registered Contacts</a></li>
          <li class="tab"><a href="#tab-about">(What are these?)</a></li>
        </ul>
        <div class="panel-container">
          <div id="tab-contacts">
            <table class="boring" id="table-contacts">
              <thead id="thead-contacts">
                <tr>
                  <th>registration id</th>
                  <th>contact id</th>
                  <th>contact name</th>
                  <th>contact type</th>
                  <th>description</th>
                  <th>corporate name</th>
                  <th>business address</th>
                </tr> 
              </thead>
              <tbody id="tbody-contacts">
                <tr class="odd">
                  <td>NNNNNN</td>
                  <td>NNNNNNNN</td>
                  <td>J. Pierremont Flathead</td>
                  <td>Head Officer</td>
                  <td>CONDO</td>
                  <td>Alternative Tentacles</td>
                  <td>666 5th Ave, New York, NY 11111</td>
                </tr>
                <tr class="even">
                  <td>.</td>  <td>.</td>  <td>.</td>  <td>.</td>  <td>.</td>  
                  <td>.</td>  <td>.</td>  
                </tr>
              </tbody>
            </table>
          </div>
          <div id="tab-about">
            The NYC Department of <strong>Housing, Preservation, and Development (HPD)</strong>
            (or more specifically, its Property Registration Unit) maintains a register of 
            rental properties so that the HPD can reach them in the event of emergency 
            conditions in their buildings.  NYC Administrative Code (§§ 27-2097 - 27-2109.1) requires 
            owners of buildings with 3 or more rental units (as well as owners of buildings with 1 or 2 
            units where an owner or family member does not occupy part of the building) to register with 
            the HPD, or face fines or significant restrictions (such as the ability to evict their 
            tenants for non-payment of rent).<p>

            Nonetheless, many owners are still not in compliance with this law: by one estimate, 
            only 23 percent of residential properties are in compliance, city-wide.  Typically
            the those buildings not in compliance have 3 units or less; for buildngs with 4 or 
            more units, the compliance rate exceeds 50%, and exceeds 80% for buildings with
            50 units or more.
            
          </div>
        </div>
      </div>
    </div>
    <div class="panel-lower" id="panel-testdata">
      <div class="popup-control">&times;</div>
      <iframe id="testdata" src="/testdata.html"></iframe>
    </div>
</body>

<!-- templates for dustjs -->

<script id="tmpl-fancy" type="text/html">
<h4>{title}</h4>
<ul>
    {#names}
    <li>{name} rocks!</li>{~n}
    {/names}
</ul>
</script>

<script id="tmpl-section-acris-header" type="text/html">
   BBL = <strong>{meta.bbl}</strong> is an ACRIS-only lot.<br>

</script>

<script id="tmpl-section-pluto-header" type="text/html">
   <strong>Primary Address</strong>: {pluto.address}, {deco.borough}<br>
   <strong>BBL</strong> = <a class="lowkey" target="parent" href="/taxlot/{meta.bbl}">{meta.bbl}</a> <span class="detail">(boro {deco.boro}, block {deco.block}, lot {deco.lot})</span><br>
   {pluto.bldg_count_label}
   {?pluto._bldg_multi}&nbsp;<a href="/taxlot/{meta.bbl}">(view all)</a>{/pluto._bldg_multi}
   <br>
</script>

<script id="tmpl-section-owner-pluto" type="text/html">
   <p class="section">
   {pluto.owner} <span class="detail">(from Pluto)</span><br>
   ACRIS records are a bit sketchy for this lot, so that's all we know.
   </p>
</script>

<script id="tmpl-section-owner-acris" type="text/html">
   <p class="section">
   {acris.owner}<br> 
   {acris.address}<br> 
   <span class="detail">Acquired on</span> <strong>{acris.transfer_date}</strong> 
           <span class="detail">for</span> <strong>${acris.amount}</strong><br>
   <span class="detail">Detailed transaction history available from <a id="link-acris" target="parent"
           href="http://a836-acris.nyc.gov/bblsearch/bblsearch.asp?{meta.bbl}">ACRIS</a></span><br>
</script>

<script id="tmpl-section-pluto-header" type="text/html">
   <strong>Primary Address</strong>: {pluto.address}, {deco.borough}<br>
   <strong>BBL</strong> = {meta.bbl} <span class="detail">(boro {deco.boro}, block {deco.block}, lot {deco.lot})</span><br>
   {pluto.bldg_count_label}
   {?pluto._bldg_multi}&nbsp;<a href="/taxlot/{meta.bbl}">(view all)</a>{/pluto._bldg_multi}
   <br>
</script>

<script id="tmpl-section-owner-pluto" type="text/html">
   <p class="section">
   {pluto.owner} (from Pluto)<br>
   </p>
</script>

<script id="tmpl-section-owner-acris" type="text/html">
   <p class="section">
   {acris.owner}<br> 
   {acris.address1}, {acris.address2}<br> 
   </p>
</script>

<script id="tmpl-section-pluto-landuse" type="text/html">
   <h3>Lot Description</h3>
   <p class="section">
   <strong>Zoning</strong> : {pluto.zone_dist1}<br>
   <strong>Land Use</strong> : {pluto.land_use_label} <span class="detail">({pluto.land_use})</span><br>
   <strong>Bldg Class</strong> : {pluto.bldg_class_label} <span class="detail">({pluto.bldg_class})</span><br>
   {?pluto._built}
   <strong>Floors</strong> : {pluto.floors} &nbsp;&nbsp;&nbsp;
   <strong>Units Total</strong> : {pluto.units_total} &nbsp;&nbsp;&nbsp;
   <strong>Built</strong> : {pluto.year_built}<br>
   {/pluto._built}
   <span class="detail">Way more detail available at <a id="link-oasis" target="parent"
       href="http://www.oasisnyc.net/map.aspx?zoomto=lot:{meta.bbl}">OASIS</a> &amp; 
       the <a id="link-bisweb" target="parent"
           href="http://a810-bisweb.nyc.gov/bisweb/PropertyProfileOverviewServlet?{slug.bisweb}">DOB</a></span><br>
   </p>
</script>

<script id="tmpl-section-owner-nobody" type="text/html">
   <p class="section">
   No ownership information available for this lot.
   </p>
</script>

<script id="tmpl-section-residential" type="text/html">
   <h3>Residential Summary </h3>
   <p class="section">
   There are {hpd.contact} HPD contacts available for this lot.<br>
   This building is [meta.stabilized] rent stabilized blah blah.<br>
   </p>
</script>

<script id="tmpl-section-compliance" type="text/html">
   <h3>Permits, Violations + Litigation</h3>
   <p class="section">
   Watch this space!
   </p>
</script>

<!-- stubs or in progress  -->

<script id="tmpl-section-taxbill" type="text/html">
   Historical tax bills available in PDF form at
   <a id="link-taxbills-nyc" target="parent" href="https://taxbills.nyc/{slug.taxbill}">taxbills.nyc</a>.
</script>

<script async defer type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCIKgEfAq3__FnK3Rg9OlOTrA3QAudPWFw&sensor=false&libraries=places"></script>
<script src="http://cdn.leafletjs.com/leaflet/v1.0.3/leaflet.js"></script>
<script src="/vendor/js/jquery-1.11.3.min.js"></script>
<script src="/vendor/js/jquery.geocomplete.min.js"></script>
<script src="/vendor/js/jquery.hashchange.min.js"></script>
<script src="/vendor/js/jquery.easytabs.min.js"></script>
<script src="/vendor/js/dust-full-0.3.0.min.js"></script>
<script src="/assets/js/dusty.js"></script>
<script src="/assets/js/nycprop.js"></script>
<script src="/assets/js/lookup.js"></script>
<script src="/assets/js/lookup.utils.js"></script>
<script src="/assets/js/lookup.geoutils.js"></script>
<script src="/assets/js/lookup.control.js"></script>
<script src="/assets/js/lookup.render.js"></script>
<script src="/assets/js/lookup.view.js"></script>
<script src="/assets/js/lookup.app.js"></script>
<script type="text/javascript">
    $(document).ready( function() {
      $('#tab-container').easytabs();
    });
</script>
</html>
